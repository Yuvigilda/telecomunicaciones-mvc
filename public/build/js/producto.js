!function(){const t=document.querySelector("#productos");if(t){let e=[],c=[];const d=document.querySelector("#listado-productos"),n=document.querySelector('[name="id_producto"]');function o(t){const o=t.target,e=document.querySelector(".listado-productos__producto--seleccionado");e&&e.classList.remove("listado-productos__producto--seleccionado"),o.classList.add("listado-productos__producto--seleccionado"),n.value=o.dataset.productoId}!async function(){const t=await fetch("/api/productos");!function(t=[]){e=t.map(t=>({descripcion:`${t.descripcion.trim()}`,id:t.id}))}(await t.json())}(),t.addEventListener("input",function(t){const n=t.target.value;if(n.length>3){const t=new RegExp(n,"i");c=e.filter(o=>{if(-1!==o.descripcion.toLowerCase().search(t))return o})}else c=[];!function(){for(;d.firstChild;)d.removeChild(d.firstChild);if(c.length>0)c.forEach(t=>{const e=document.createElement("LI");e.classList.add("listado-productos__producto"),e.textContent=t.descripcion,e.dataset.productoId=t.id,e.onclick=o,d.appendChild(e)});else{const t=document.createElement("P");t.classList.add("listado-productos__no-resultado"),t.textContent="No hay resultados coincidentes",d.appendChild(t)}}()}),n.value&&(async()=>{const t=await async function(t){const o=`/api/producto?id=${t}`,e=await fetch(o);return await e.json()}(n.value),{descripcion:o}=t,e=document.createElement("LI");e.classList.add("listado-productos__producto","listado-productos__producto--seleccionado"),e.textContent=`${o}`,d.appendChild(e)})()}}();